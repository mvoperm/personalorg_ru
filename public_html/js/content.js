!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=17)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=(e=2)=>{const t=document.getElementById("password");let n=t.getAttribute("type");document.getElementById("toggle-password-type").innerHTML=2===e&&"text"===n||0===e?"Показать пароль":"Скрыть пароль",n=2===e&&"text"===n||0===e?"password":"text",t.setAttribute("type",n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=e=>{return!isNaN(parseInt(e))&&isFinite(e)}},function(e,t,n){},,function(e,t,n){},function(e,t){const n=e=>{const t=document.getElementById("currentfolder-items");document.head.appendChild(t);const n=t.sheet,o=`summary.folderstree-summary[data-folder-idtotal='${e}'] {font-weight: bold;}`,r=`section.itemsfolder[data-folder-idtotal='${e}'] {display: block;}`;n.insertRule(o,0),n.insertRule(r,1)},o=e=>{if("0"!==e){const t=e.split("-");let n=document.getElementById("folderstree"),o=t[0],r=n.querySelector(`summary[data-folder-idtotal='${o}']`);(n=r.parentNode).open=!0;const d=t.length;for(let e=1;e<d;e++)o+=`-${t[e]}`,r=n.querySelector(`summary[data-folder-idtotal='${o}']`),(n=r.parentNode).open=!0}},r=()=>{document.getElementsByTagName("main")[0].classList.toggle("reverse-display-mode")};{const e=document.getElementsByTagName("body")[0].getAttribute("data-startfolder");o(e),n(e)}{const e=document.getElementsByClassName("folderstree-summary");Array.from(e).forEach(e=>{let t=e.getAttribute("data-folder-idtotal");e.addEventListener("click",()=>{n(t)})})}{const e=document.getElementsByClassName("toggle-folderstree-button");for(let t of e)t.addEventListener("click",r)}if(document.getElementById("editform")){const e=document.getElementsByClassName("itemsfolder-branch-ancestor");Array.from(e).forEach(e=>{const t=e.getAttribute("data-startfolder");e.addEventListener("click",()=>{o(t),n(t)})})}},function(e,t,n){},,,,,,function(e,t){(async()=>{const e=document.getElementById("css-variables"),t=e.getAttribute("data-user-id"),n=e.getAttribute("data-user-folder");let o=await fetch("../users/optionslist_default.json"),r=await o.json(),d=await fetch(`../users/${n}/optionslist.json`),i=await d.json();const l=[["--basic-color-hue","basic_hue"],["--article-tranparency","article_transparency"],["--body-bg-image","bg_image"],["--basic-font-type","basic_font_type"],["--basic-font-size","basic_font_size"]],a=e.sheet;let c={},s={};for(let e of l)c[e[1]]=r[e[1]],"0"===t&&(s[e[1]]=c[e[1]]);if("0"!==t)for(let e of l)s[e[1]]=i[e[1]]||c[e[1]];const m=(e=>{const t=document.cookie.split("; ");let n="";for(let o of t)if(o.includes("_")){let t=o.indexOf("_");if(o.substr(0,t)===e){n+=`${o.substr(t+1)} `}}""!==n&&(n=n.substr(0,n.length-1));const o=n.split(" ");let r={};for(let e of o){let t=e.indexOf("="),n=e.substring(0,t),o=e.substring(t+1);r[n]=o}return r})(t);let u="";for(let e of l){let n=e[1],o=n in m&&"0"!=t?m[n]:s[n];"bg_image"===n&&"0"!==o&&(o=`url(../../bg-images/${o})`),String(o).includes(" ")&&(o=`'${o}'`),"basic_font_size"===n&&(o+="px"),u+=`${e[0]}: ${o}; `,"bg_image"===n&&(o.includes("-repeat.")||(u+="--body-bg-repeat: no-repeat; "))}const f=`:root { ${u+="--folderstree-width: 15em; "}}`;a.insertRule(f,0)})()},function(e,t){const n=()=>{document.getElementById("editform").close()};if(document.getElementById("editform")){document.getElementById("cancel").addEventListener("click",n)}},,,,function(e,t,n){"use strict";n.r(t);n(12),n(5);const o=e=>{return document.getElementById(e).getAttribute("value")},r=(e,t)=>{document.getElementById(e).setAttribute("value",t)},d=e=>{const t=new Event("click");e.dispatchEvent(t)},i=e=>{const t=document.getElementById(e);d(t)},l=e=>{const t=e.lastIndexOf("-");return-1===t?"0":e.substring(0,t)},a=e=>{const t=e.lastIndexOf("-");return-1===t?e:e.substring(t+1)},c=(e,t)=>{switch(t){case"0":return e;default:if("0"===e){return t}{let r=e+"-"+t;if("add"===o("editform-element-edit-type"))return r;const d=o("editform-idlocal"),i=o("editform-currentparent-idtotal"),l=i.split("-"),a=l.length,c=e.split("-");if("0"===i){if(d<c[0]){c[0]=String(Number(c[0])-1),r=c.join("-")+"-"+t}return r}if(a<c.length){for(var n=0;n<a;n++)if(l[n]!==c[n])return r;if(d<c[a]){c[a]=String(Number(c[a])-1),r=c.join("-")+"-"+t}}return r}}},s=(e,t,n)=>{const o="folder"===t?"folderstree":"items",d="folder"===t?"summary":"section",i="folder"===t?"details":"article",l=document.getElementById(o),a=`${d}[data-folder-idtotal='${e}']`,c="folder"===t?l.querySelector(a).parentNode:l.querySelector(a),s=c.querySelectorAll(i);let m=1-n;for(let e of s)e.parentNode===c&&(m+=1);const u=document.getElementById("relocation-order-setnumber");if(u.value=u.value>m?m:u.value,u.setAttribute("max",m),r("editform-maxordernumber",m),"folder"==t){document.getElementById("editform-has-folders").setAttribute("value",m>1);const t=document.getElementById("editform-has-items"),n=`section[data-folder-idtotal='${e}']`,o=document.getElementById("items").querySelector(n);t.setAttribute("value",null!==o.querySelector("article"))}return m},m=()=>{const e=o("editform-element-toedit-type"),t=document.getElementById("relocation-order-setnumber"),n="folder"===e?t.value:"0",r=o("editform-parentfolder-idtotal"),d=c(r,n);document.getElementById("editform-folder-tooppen").value=d},u=()=>{document.getElementById("relocation-order-setnumber").value=1,m()},f=()=>{const e=document.getElementById("relocation-order-setnumber"),t=e.getAttribute("max");e.value=t,m()},g=()=>{document.getElementById("relocation-order-setnumber").focus()},y=()=>{o("editform-element-edit-type");const e=o("editform-element-toedit-type"),t=o("editform-currentfolder-idtotal"),n="folder"===e?l(t):t;r("editform-parentfolder-idtotal",n),document.getElementById("relocation-tree").style.display="";s(n,e,1);m()},b=()=>{const e=document.getElementById("relocation-tree").querySelector("input");d(e),(()=>{const e=o("editform-currentfolder-idtotal"),t=o("editform-element-toedit-type"),n=document.getElementById("relocation-tree"),r=n.querySelectorAll("input");for(let e of r)e.removeAttribute("disabled");for(let n of r){if(n.getAttribute("value")===e){n.setAttribute("disabled","");const e=n.parentNode.parentNode.nextElementSibling;if(e&&"folder"===t&&"UL"===e.tagName){const t=e.querySelectorAll("li");for(let e of t){e.querySelector("input").setAttribute("disabled","")}}}}n.style.display="block",d(r[0]),m()})()};if(document.getElementById("editform")){const e=document.getElementsByName("relocation_destination_folder");Array.from(e).forEach(e=>{e.addEventListener("click",()=>{(e=>{o("editform-element-edit-type");const t=o("editform-element-toedit-type"),n=e.getAttribute("value");r("editform-parentfolder-idtotal",n);const d=o("editform-currentfolder-idtotal"),i="folder"===t?l(d):d,a=s(n,t,i===n?1:0),c=document.getElementById("relocation-order-setnumber");c.value>a&&(c.value=a),m()})(e)})})}if(document.getElementById("editform")){document.getElementById("editform-infolder-radio").addEventListener("click",y),document.getElementById("editform-outfolder-radio").addEventListener("click",b),document.getElementById("editform-firstordernumber-radio").addEventListener("click",u),document.getElementById("editform-lastordernumber-radio").addEventListener("click",f);const e=document.getElementById("editform-setordernumber-radio");e.addEventListener("click",g);const t=document.getElementById("relocation-order-setnumber");t.addEventListener("change",m),t.addEventListener("focus",()=>{e.checked=!0})}function p(e,t,n,o){if(this.objectToedit=e,this.editType=t,this.contentName=n,this.elementToeditType=o,this.menuToEdit=e.parentNode.parentNode.parentNode,this.elementToEdit="folder"===o||"add"===t?this.menuToEdit.parentNode.parentNode.parentNode:this.menuToEdit.parentNode.parentNode,this.currentFolderIdTotal=this.elementToEdit.getAttribute("data-folder-idtotal"),this.currentParentIdTotal="folder"===o?l(this.currentFolderIdTotal):this.currentFolderIdTotal,this.currentIdLocal="add"===t?"":"folder"===o?a(this.currentFolderIdTotal):this.elementToEdit.getAttribute("data-idlocal"),this.destinationParentIdtotal="folder"!==o||"delete"!==t&&"relocate"!==t?this.currentFolderIdTotal:l(this.currentFolderIdTotal),this.folderToopen="folder"!==o||"add"!==t&&"relocate"!==t?this.destinationParentIdtotal:c(this.destinationParentIdtotal,"1"),"edit"==t){const e="folder"===o?"h2":"h4",t=this.elementToEdit.querySelector(e);this.editformElementTitle=t.textContent}else this.editformElementTitle="";if("edit"===t&&"item"===o){const e=this.elementToEdit.querySelectorAll("p:not(.editmenu-subdetails-p)");if(e.length>0){const t=e[0].getElementsByTagName("a");let n;1===t.length?(this.editformItemUri=t[0].textContent,n=1):(this.editformItemUri="",n=0);let o=e[n].textContent;const r=e.length;for(n++;n<r;n++)o+="\n"+e[n].textContent;this.editformItemText=o}}else this.editformItemUri="",this.editformItemText="";this.textTag="notes"===n?"textarea":"input"}const E=e=>{let t=new p(e,e.getAttribute("data-edit-type"),o("editform-content-name"),e.getAttribute("data-element-toedit-type"));t.menuToEdit.open=!1,r("editform-element-edit-type",t.editType),r("editform-element-toedit-type",t.elementToeditType),r("editform-currentfolder-idtotal",t.currentFolderIdTotal),r("editform-currentparent-idtotal",t.currentParentIdTotal),r("editform-idlocal",t.currentIdLocal),r("editform-parentfolder-idtotal",t.destinationParentIdtotal),document.getElementById("editform-folder-tooppen").value=t.folderToopen;const n=e.innerHTML;document.getElementById("editform-title").innerHTML=n,r("editform-element-title",t.editformElementTitle),r("editform-item-uri",t.editformItemUri);const d=document.getElementById("editform-item-text");"textarea"===t.textTag?d.innerHTML=t.editformItemText:d.setAttribute("value",t.editformItemText),"add"===t.editType&&(s(t.currentFolderIdTotal,t.elementToeditType,0),i("editform-firstordernumber-radio")),"relocate"===t.editType&&(i("editform-infolder-radio"),i("editform-firstordernumber-radio")),((e,t)=>{const n="add"===e?"edit":e,o=document.getElementById("editform-type");document.head.appendChild(o);const r=o.sheet,d=`.editform-${n} {display: block;}`;r.insertRule(d,0);let i=1;if("add"===e||"relocate"===e){const e=".editform-relocate-add {display: block;}";r.insertRule(e,i),i+=1}if("edit"===n&&"folder"===t){const e="#editform-item-par-text, #editform-item-par-uri {display: none;}";r.insertRule(e,i)}if("delete"===n){const e="#editform {width: 20em; max-width: 92vw;}";r.insertRule(e,i)}})(t.editType,t.elementToeditType);const l=document.getElementById("editform");if("ontouchstart"in window)"delete"!==t.editType&&(l.style.top=window.pageYOffset),l.showModal();else{l.showModal(),navigator.userAgent.includes("Firefox")&&l.scrollIntoView({behavior:"auto",block:"center",inline:"nearest"})}switch(t.editType){case"add":case"edit":document.getElementById("editform-element-title").focus();break;case"relocate":document.getElementById("editform-infolder-radio").focus();break;case"delete":document.getElementById("submit").focus()}};if(document.getElementById("editform")){const e=document.getElementsByClassName("editmenu-subdetails-button");Array.from(e).forEach(e=>{e.addEventListener("click",()=>{E(e)})})}n(13);var I=n(1),h=n(0);if(!document.getElementById("editform")){{const e=document.getElementById("toggle-password-type"),t=document.getElementById("password");e.addEventListener("click",()=>{Object(h.a)()}),t.addEventListener("blur",()=>{Object(h.a)(0)})}{let e=(e,t,n)=>{let o=`hsla(${t},100%,85%,${n/100})`;e.style.backgroundColor=o};const t=document.getElementById("bg-hue"),n=document.getElementById("bg-transparency"),o=document.getElementById("bg-hue-value"),r=document.getElementById("bg-transparency-value"),d=document.getElementById("check-bg-color");let i=()=>e(d,t.value,n.value);i();let l=()=>{o.value=t.value,i()};t.addEventListener("change",l);let a=()=>{t.value=o.value,i()};o.addEventListener("change",a);let c=()=>{r.value=n.value,i()};n.addEventListener("change",c);let s=()=>{n.value=r.value,i()};r.addEventListener("change",s)}{const e=document.getElementById("ck-article-color-delete"),t=document.getElementById("ck-article-color");let n=()=>{t.checked=!e.checked,t.disabled=!!e.checked};e.addEventListener("click",n)}{const e=e=>{let t=!1;const n=document.getElementById("bg-hue-value"),o=document.getElementById("bg-transparency-value"),r=n.value,d=o.value;Object(I.a)(r)&&Object(I.a)(r)&&(t=parseInt(r)>=0&&parseInt(r)<=360&&parseInt(d)>=0&&parseInt(d)<=100),t||(e.preventDefault(),alert("В поле насыщенности и/или прозрачности введено недопустимое значение!"))};document.getElementById("set-article-color").addEventListener("submit",e,!1)}{const e=(e,t,n)=>{e.style.fontFamily=t,e.style.fontSize=n+"px"},t=document.getElementById("basic-font-type"),n=document.getElementById("basic-font-size"),o=document.getElementById("check-basic-font");let r=()=>e(o,t.value,n.value);r(),t.addEventListener("change",r),n.addEventListener("change",r)}{const e=document.getElementById("ck-basic-font-delete"),t=document.getElementById("ck-basic-font");let n=()=>{t.checked=!e.checked,t.disabled=!!e.checked};e.addEventListener("click",n)}{const e="fg-images-collection",t=document.getElementById("bg-image-file"),n=document.getElementById("bg-images-collection").getElementsByTagName("figure");n.length;let o=o=>{t.value=o;for(let t of n)t.getAttribute("class").includes("choosed-bg-image")&&t.setAttribute("class",e)};for(let t of n){let n=t.getAttribute("title"),r=()=>{o(n),t.setAttribute("class",`${e} choosed-bg-image`)};t.addEventListener("click",r)}}{const e=document.getElementById("delete-bg-image");let t=()=>{document.getElementById("submit-bg-image").innerHTML=e.checked?"Удалить фоновый рисунок":"Выбрать фоновый рисунок"};e.addEventListener("click",t)}}n(2),n(6),n(4)}]);